<!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
    </head>
    <body>
    <div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä¸Šä¸€ç« çš„æœ«å°¾æåˆ°äº†ç›®å‰æˆ‘ä»¬çš„å·¥ç¨‹å·²ç»æˆä¸ºäº†ä¸€ä¸ªéå¸¸å¤§çš„åº”ç”¨ï¼Œå®ƒåˆ†åˆ«æœ‰ç½‘å…³ <code>Core</code>ã€ç”¨æˆ·ã€ç‰©æ–™ä¸‰å¤§æ¨¡å—ç»„æˆï¼Œå³ä½¿ç›®å‰æ¨¡å—çš„åŠŸèƒ½éƒ½è¿˜æ˜¯æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œéƒ½å·²ç»è¾¾åˆ°äº† <strong>40+</strong> æ¥å£çš„ç¨‹åº¦ï¼ŒåæœŸå†å¤æ‚ä¸€ç‚¹çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆæ•´ä¸ªé¡¹ç›®çš„è¿­ä»£éƒ½ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚</p>
<p>ä¸ºäº†é¿å…åæœŸçš„å¼€å‘ä¸ç»´æŠ¤çš„éº»çƒ¦ï¼Œå¯ä»¥æå‰å°†å·¥ç¨‹æ‹†è§£ä¸º <strong>3</strong> ä¸ªç‹¬ç«‹çš„é¡¹ç›®ã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®æ‹†åˆ†</h2>
<h4 data-id="heading-2">æ‹†åˆ†æ–¹å¼</h4>
<p>åœ¨ç‰©æ–™ç³»ç»Ÿä¸­æåˆ°äº†ä¸€èˆ¬é¡¹ç›®ç®¡ç†æ–¹å¼æœ‰å¦‚ä¸‹ä¸¤ç§ï¼š</p>
<ul>
<li><strong>multirepo åˆ†æ•£å¼ç®¡ç†</strong></li>
</ul>
<p>å°†é¡¹ç›®åˆ†åŒ–æˆä¸ºå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ <code>Reporsitory</code> æ¥ç®¡ç†ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>å¯¹äºæ¯ä¸ªé¡¹ç›®æ¥è¯´ï¼Œä¸å†é™å®šå¼€å‘è¯­è¨€ä¸è§„èŒƒï¼Œå¼€å‘äººå‘˜å¯ä»¥é€‰æ‹©æ“…é•¿çš„æ¡†æ¶æ¥å¼€å‘åŠŸèƒ½ï¼›</li>
<li>å•é¡¹ç›®çš„åŠŸèƒ½å°†æ›´åŠ èšç„¦ï¼Œåªå…³æ³¨æŸä¸€ä¸ªå…·ä½“æ¨¡å—çš„å¼€å‘ï¼Œå¼€å‘äººå‘˜åœ¨éœ€æ±‚åˆ†é…ä¸Šä¼šæ›´ä¸ºåˆç†ï¼›</li>
<li>å¯ä»¥æœ‰è‡ªå·±çš„åˆ†æ”¯ç®¡ç†è§„èŒƒä¸å¼€å‘èŠ‚å¥ï¼Œå•éœ€æ±‚å¼€å‘æ•ˆç‡æ›´é«˜ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ol>
<li>åŒæ­¥ä¸Šçº¿ä¼šæ¯”è¾ƒå›°éš¾ï¼Œä¸€ä¸ªå¤§å‹çš„é¡¹ç›®å¯èƒ½å­˜åœ¨åå‡ æˆ–è€…æ›´å¤šæœåŠ¡æ¨¡å—ï¼Œä¸€æ¬¡ä¸Šçº¿å¯èƒ½éœ€è¦åŒæ­¥æ„å»ºå¤šä¸ªæœåŠ¡ï¼›</li>
<li>ç”±äºå¤šä¸ªä»“åº“ç®¡ç†ï¼ŒåŒæ­¥éœ€æ±‚ä¸­ç›¸äº’ä¾èµ–æ€§ä¸Šå‡ï¼Œå¼€å‘è”è°ƒæ•ˆç‡ä¼šé™ä½ï¼›</li>
<li>å­˜åœ¨ä¸åŒè¯­è¨€ã€æ¡†æ¶å®ç°çš„æƒ…å†µï¼Œä¼šé€ æˆæ€»ä½“é¡¹ç›®ç»´æŠ¤æˆæœ¬ä¸Šå‡ã€‚</li>
</ol>
<ul>
<li><strong>monorepo é›†ä¸­å¼ç®¡ç†</strong></li>
</ul>
<p>å°†æ‰€æœ‰çš„æ¨¡å—ç»Ÿä¸€çš„æ”¾åœ¨åŒä¸€ä¸ª <code>Reporsitory</code> ä¸­ç®¡ç†ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>ç»Ÿä¸€çš„è§„èŒƒã€è¯­è¨€ã€æ¡†æ¶ï¼Œé¡¹ç›®æ•´ä½“ç»“æ„å®Œæ•´æ€§è¿œè¶… <code>multirepo</code> æ–¹å¼ï¼›</li>
<li>æ ‡å‡†åŒ–çš„å¼€å‘æµç¨‹ï¼Œè§„é¿å¾ˆå¤šä¸å¿…è¦çš„å†²çªä¸é”™è¯¯ï¼ŒåŒ…æ‹¬æ•´ä½“æ¶æ„å‡çº§ç­‰ï¼›</li>
<li>æ‰€æœ‰æ¨¡å—éƒ½åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­æ–¹ä¾¿è°ƒè¯•ä¸æ€»ä½“å·¥ç¨‹çº§åˆ«çš„è¿­ä»£ä¸ç»´æŠ¤ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ol>
<li>é¡¹ç›®è¿‡å¤§çš„æƒ…å†µä¸‹ï¼Œæ•´ä½“ä»£ç è¿‡äºè‡ƒè‚¿ï¼›</li>
<li>å•ä»“åº“ä¸­å¯¹åˆ†æ”¯ç®¡ç†è¦æ±‚è¾ƒé«˜ï¼Œä¿®æ”¹å’Œå¼€å‘å¯èƒ½å˜å¾—ç¹çï¼Œé™ä½æ•ˆç‡ã€‚</li>
</ol>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œä¸¤ç§æ¨¡å¼éƒ½æœ‰åˆ©æœ‰å¼Šï¼Œåˆ†å¸ƒå¼ç®¡ç†æ¯”è¾ƒç®€å•ä¹Ÿæ˜¯å¤§å®¶å¸¸ç”¨çš„å¼€å‘æ¨¡å¼ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç€é‡å±•ç¤º <code>monorepo</code> çš„æ‹†åˆ†æ­¥éª¤ã€‚</p>
<h4 data-id="heading-3">Monorepo æ‹†åˆ†</h4>
<p>ç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯åŸºäº <code>Nest CLI</code> æ­å»ºçš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>Nest CLI</code> æä¾›çš„ <code>monorepo</code> çš„æ‹†åˆ†åŠŸèƒ½ã€‚</p>
<p>é¦–å…ˆæ‰§è¡Œï¼Œ<code>CLI</code> çš„ <code>generate app</code> è„šæœ¬ï¼Œåˆ†åˆ«åˆ›å»ºå¯¹åº”çš„ <code>materials</code> ä¸ <code>userCenter</code> å·¥ç¨‹ã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$ </span><span class="bash"> nest generate app materials</span>
<span class="hljs-meta prompt_">$ </span><span class="bash"> nest generate app userCenter</span>
</code></pre>
<p><img src="p1-juejin.byteimg.comtos-cn-i-k3u1fbpfcp17f6c27dfaa84ccf86680ff878121d99~tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp?" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ<code>Nest CLI</code> å·²ç»å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†å¯¹åº”çš„å·¥ç¨‹ç›®å½•ï¼ŒåŒæ—¶å¤§å®¶ä¹Ÿå¯ä»¥è§‚å¯Ÿä¸€ä¸‹ <code>nest-cli.json</code> é‡Œé¢çš„å‚æ•°é…ç½®åŒºåˆ«ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">{
  "$schema": "https://json.schemastore.org/nest-cli",
  "collection": "@nestjs/schematics",
  "sourceRoot": "apps/fast-gateway/src",
  "monorepo": fasle,
<span class="hljs-deletion">-  "sourceRoot": "src"</span>
<span class="hljs-addition">+  "root": "apps/fast-gateway",</span>
<span class="hljs-addition">+  "compilerOptions": {</span>
<span class="hljs-addition">+    "webpack": true,</span>
<span class="hljs-addition">+    "tsConfigPath": "apps/fast-gateway/tsconfig.app.json"</span>
<span class="hljs-addition">+  },</span>
<span class="hljs-addition">+  "projects": {</span>
<span class="hljs-addition">+    "fast-gateway": {</span>
<span class="hljs-addition">+      "type": "application",</span>
<span class="hljs-addition">+      "root": "apps/fast-gateway",</span>
<span class="hljs-addition">+      "entryFile": "main",</span>
<span class="hljs-addition">+      "sourceRoot": "apps/fast-gateway/src",</span>
<span class="hljs-addition">+      "compilerOptions": {</span>
<span class="hljs-addition">+        "tsConfigPath": "apps/fast-gateway/tsconfig.app.json"</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+    },</span>
<span class="hljs-addition">+    "materials": {</span>
<span class="hljs-addition">+      "type": "application",</span>
<span class="hljs-addition">+      "root": "apps/materials",</span>
<span class="hljs-addition">+      "entryFile": "main",</span>
<span class="hljs-addition">+      "sourceRoot": "apps/materials/src",</span>
<span class="hljs-addition">+      "compilerOptions": {</span>
<span class="hljs-addition">+        "tsConfigPath": "apps/materials/tsconfig.app.json"</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+    },</span>
<span class="hljs-addition">+    "user-center": {</span>
<span class="hljs-addition">+      "type": "application",</span>
<span class="hljs-addition">+      "root": "apps/user-center",</span>
<span class="hljs-addition">+      "entryFile": "main",</span>
<span class="hljs-addition">+      "sourceRoot": "apps/user-center/src",</span>
<span class="hljs-addition">+      "compilerOptions": {</span>
<span class="hljs-addition">+        "tsConfigPath": "apps/user-center/tsconfig.app.json"</span>
<span class="hljs-addition">+      }</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+  }</span>
}
</code></pre>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯åŠ¨äº† <code>monorepo</code> æ¨¡å¼å°±ä¼šé»˜è®¤æ‰“å¼€ <code>webpack</code> çš„é…ç½®é¡¹ï¼Œä½†å¦‚æœä¸æƒ³è‡ªå·±å¯¼å…¥å®ä½“ç±»æˆ–è€…å…¶ä»–é™æ€è·¯å¾„çš„è¯ï¼Œå¯ä»¥è®¾ç½®ä¸º <code>false</code>ã€‚</p>
</blockquote>
<p>ä¸ä¹‹å‰æˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨çš„ <code>nest-cli.json</code> é…ç½®ä¸åŒçš„ï¼Œå¤šäº† <code>monorepo</code>ã€<code>compilerOptions</code>ã€<code>projects</code> ç­‰å‚æ•°ï¼Œå®ƒä»¬æ˜¯ä¹‹å‰ä»‹ç»è¿‡çš„åœ¨ <code>NestJS</code> ä¸­ä½¿ç”¨ <code>monorepo</code> æ¨¡å¼å¼€å‘çš„å¿…å¤‡å‚æ•°ï¼Œä½†è¿™äº›å·²ç»æœ‰ <code>CLI</code> å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†ï¼Œå¯¹äºè§„èŒƒåŒ–çš„å·¥ç¨‹æ¥è¯´ï¼Œ<code>CLI</code> èƒ½åšçš„äº‹æƒ…è¿˜æ˜¯éå¸¸å¤šçš„ã€‚</p>
<p>æ¥ç€ä¿®æ”¹å¯åŠ¨è„šæœ¬ï¼Œç”±äºæˆ‘ä»¬é»˜è®¤çš„é¡¹ç›®æ˜¯ <code>fast-gateway</code>ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨ <code>nest start:dev</code> å¯åŠ¨çš„å°±æ˜¯ <code>fast-gateway</code> çš„é¡¹ç›®ï¼Œå…¶ä»–çš„å¯åŠ¨è„šæœ¬ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-attr">"start:gateway"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env RUNNING_ENV=dev nest start --watch"</span><span class="hljs-punctuation">,</span>
<span class="hljs-attr">"start:user"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env RUNNING_ENV=dev nest start --watch user-center"</span><span class="hljs-punctuation">,</span>
<span class="hljs-attr">"start:materials"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env RUNNING_ENV=dev nest start --watch materials"</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>å…¶ä¸­ <code>user-center</code> ä¸ <code>materials</code> åˆ†åˆ«å¯¹åº”å¯åŠ¨é…ç½®æ–‡ä»¶ä¸­çš„å­é¡¹ç›®ï¼Œå¦‚æœå¡«é”™çš„è¯ï¼Œåˆ™ä¼šé»˜è®¤å¯åŠ¨ä¸»é¡¹ç›®ã€‚</p>
<p>ç”±äºä¹‹å‰æˆ‘ä»¬ä½¿ç”¨äº†åˆ«åé…ç½®ï¼Œæ‰€ä»¥è¦ä¿®æ”¹å¯¹åº”çš„ <code>tsconfig.app.json</code> çš„é…ç½®æ‰èƒ½æ­£å¸¸å¯åŠ¨é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// apps/fast-gateway/tsconfig.app.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"extends"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../../tsconfig.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"src/*"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"types/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"../../types/*"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../../dist/apps/fast-gateway"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"src/**/*"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"../../types/*.d.ts"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exclude"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"node_modules"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"test"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"**/*spec.ts"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¸»è¦æ˜¯ä¿®æ”¹äº†åˆ«åè·¯å¾„è·Ÿå…¨å±€ä¾èµ–è¿™äº›é…ç½®ï¼Œå†ä¿®æ”¹å®Œ <code>tsconfig</code> é…ç½®ä¹‹åï¼ŒåŸºæœ¬ä¸Šä¸éœ€è¦æ”¹åŠ¨ä»£ç ï¼Œå³å¯æ­£å¸¸å¯åŠ¨é¡¹ç›®ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«è¿è¡Œ <code>yarn start:gateway</code> ä¸ <code>yarn start:user</code>ï¼Œå³å¯çœ‹åˆ°ä¸¤ä¸ªé¡¹ç›®å·²ç»å¯ä»¥åˆ†åˆ«è¿è¡Œèµ·æ¥äº†ã€‚</p>
<p><img src="p3-juejin.byteimg.comtos-cn-i-k3u1fbpfcp6aa02111cc4d4397966bddca93b83184~tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp?" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<h4 data-id="heading-4">å…¬å…±æ¨¡å— library</h4>
<p>ä»»ä½•é€‚åˆå¤ç”¨çš„åŠŸèƒ½éƒ½å¯ä»¥ä½œä¸ºåº“æ¥ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯æå–é‡å¤çš„æ¨¡å—ï¼Œç„¶ååœ¨æ¯ä¸ªé¡¹ç›®ä¸­ç›´æ¥å¼•ç”¨ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹çš„è¯ï¼Œåˆ™åªéœ€è¦åº“çš„ä»£ç å³å¯ã€‚</p>
<p><code>NestJS</code> åœ¨ <code>monorepos</code> çš„æ¨¡å¼ä¸‹ï¼Œæä¾›äº† <code>library</code> çš„é…ç½®ï¼Œå¯ä»¥è®©é¡¹ç›®ä»¥è½»é‡çº§çš„æ–¹å¼æ¥ä½¿ç”¨è¿™äº›å…¬å…±çš„æ¨¡å—ï¼Œè€Œåœ¨ <code>multirepo</code> çš„æ¨¡å¼ä¸‹ï¼Œå¤§éƒ¨åˆ†åˆ™æ˜¯é‡‡ç”¨ <code>npm</code> åŒ…çš„æ–¹å¼æ¥å¤„ç†å…¬å…±æ¨¡å—ã€‚</p>
<p>åœ¨ä¹‹å‰çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª <code>comm</code> çš„æ–‡ä»¶å¤¹æ¥å¤„ç†å…¬å…±çš„é€»è¾‘éƒ¨åˆ†ï¼Œä¹‹å‰è‰¯å¥½çš„ç¼–ç è§„èŒƒæ­¤æ—¶å°±æ´¾ä¸Šäº†ç”¨åœºï¼Œæ¥ä¸‹æ¥å¯ä»¥ä½¿ç”¨ <code>library</code> æ¥è®² <code>comm</code> ä¸­çš„æ¨¡å—è¿›è¡Œå°è£…ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼šåˆ›å»º <code>comm library</code>ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$ </span><span class="bash">nest g library common</span>
</code></pre>
<p><img src="p1-juejin.byteimg.comtos-cn-i-k3u1fbpfcp59d13a774e374a34a86e5df3aac17308~tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp?" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼šå°† <code>fast-gateway</code> å·¥ç¨‹ä¸­ <code>comm</code> çš„æ¨¡å—å…¨éƒ¨ç§»æ¤åˆ° lib ä¸­ï¼Œå¹¶åœ¨ <code>index.ts</code> ä¸­å¯¼å‡º</p>
<p><img src="p6-juejin.byteimg.comtos-cn-i-k3u1fbpfcp9c01ab4699014925b7d08614abbf2681~tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp?" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼šä¿®æ”¹å·¥ç¨‹ä¸­çš„å¼•ç”¨è·¯å¾„</p>
<p><img src="p1-juejin.byteimg.comtos-cn-i-k3u1fbpfcpd457130031fd46068d8448b31580bdee~tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp?" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p>å¦‚æœæ€•ä¿®æ”¹ä¸å½»åº•çš„è¯ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤ <code>comm</code> ç›®å½•ï¼Œç„¶åæ ¹æ®æ§åˆ¶å°é”™è¯¯ä¿®æ”¹å¯¹åº”çš„å¼•ç”¨è·¯å¾„å³å¯ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<code>comm</code> ä¸­çš„ <code>database</code> æ¨¡å—ä¹Ÿè¢«å¤åˆ¶äº†ï¼Œç§»åŠ¨äº†è·¯å¾„æ‰€ä»¥è¦è®°å¾—ä¿®æ”¹åŠ è½½å®ä½“è·¯å¾„ï¼Œå¦åˆ™å¯åŠ¨çš„æ—¶å€™å¹¶ä¸ä¼šæŠ¥é”™ï¼Œä½†è¿è¡Œçš„æ—¶å€™ä¼šæŠ¥æ‰¾ä¸åˆ°å®ä½“ç±»ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¸‰ä¸ªé¡¹ç›®çš„æ•°æ®åº“éƒ½æ˜¯å…±ç”¨çš„ï¼Œæ‰€ä»¥è¿™ä¸€å—çš„ä»£ç ä¹Ÿè¢«æˆ‘æŠ½å–å‡ºæ¥ä½¿ç”¨ã€‚æ‰€ä»¥ <code>database</code> æ¨¡å—çš„æŠ½å–éœ€è¦æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µæ¥ä½¿ç”¨ã€‚</p>
</blockquote>
<h4 data-id="heading-5">æ‹†è§£ä¸šåŠ¡</h4>
<p>å†å®Œæˆäº†ä¹‹å‰æ‰€æœ‰çš„æ­¥éª¤ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹æ‹†åˆ†å…·ä½“çš„ä¸šåŠ¡ä»£ç äº†ï¼Œä¸ <code>comm</code> è½¬æˆ <code>library</code> ä¸€æ ·ï¼Œå…¬å…±çš„ä»£ç æˆ‘ä»¬ä¹Ÿæ˜¯æŒ‰ç…§ç›®å½•æ¥åˆ’åˆ†çš„ï¼Œ<del>æ‰€ä»¥æ‹†è§£ä¸šåŠ¡çš„è¿‡ç¨‹ä¹Ÿä¼šéå¸¸çš„é¡ºåˆ©</del>(<em>ä¸€ç‚¹éƒ½ä¸é¡ºåˆ©ï¼Œæ”¹å¼•ç”¨è·¯å¾„æ”¹çš„å¿«æ­»äº†</em>)</p>
<p><img src="p9-juejin.byteimg.comtos-cn-i-k3u1fbpfcp1f629431b4a943faaaa89ad2b1f6ca30~tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp?" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p>ä¸ºäº†å¿«é€Ÿçš„åˆ†å‰²é¡¹ç›®ï¼Œæœ‰äº›è·¯å¾„æˆ‘ä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å°†å¼•ç”¨è·¯å¾„ä¼˜åŒ–çš„æ›´å¥½ä¸€ç‚¹ã€‚</p>
<p>å¦‚æœæœ‰åŒå­¦ä¸ä¹ æƒ¯ä½¿ç”¨ <code>monorepo</code> çš„å¼€å‘æ–¹å¼ï¼Œè€Œæ˜¯ <code>multirepo</code> æ¥ç®¡ç†é¡¹ç›®ï¼Œé‚£ä¹ˆæ‹†åˆ†çš„è¿‡ç¨‹ç›¸å¯¹æ¥è¯´ä¼šæ¯”è¾ƒé¡ºåˆ©ï¼Œè·¯å¾„é—®é¢˜åº”è¯¥æ¯”è¾ƒå®¹æ˜“è§£å†³ã€‚</p>
<p>å¦‚æœæƒ³ä½¿ç”¨ <code>multirepo</code> æ¥ç®¡ç†é¡¹ç›®çš„è¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨ <code>nest build common</code> å‘½ä»¤å°† <code>library</code> æ‰“åŒ…ä¹‹åä¸Šä¼ åˆ°ç§æœ‰æˆ–è€…å…¬æœ‰æºä»¥ <code>npm</code> åŒ…çš„æ–¹å¼å¼•å…¥å³å¯ï¼Œä½†è¦æ³¨æ„è¿™ç§æ–¹å¼å¼•å…¥ä¹‹åæ•°æ®åº“çš„å®ä½“ç±»å¼•ç”¨è·¯å¾„å¯èƒ½ä¹Ÿéœ€è¦ä¿®æ”¹ã€‚</p>
<p><img src="p6-juejin.byteimg.comtos-cn-i-k3u1fbpfcpf1ae0c5e49604170bdd6fe0ff393bd8e~tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp?" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<h2 data-id="heading-6">å†™åœ¨æœ€å</h2>
<p>æœ¬ç« çš„ç¤ºä¾‹ä»£ç åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fboty-design%2Fgateway%2Ftree%2Ffeat%2Fmonorepo" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/boty-design/gateway/tree/feat/monorepo" ref="nofollow noopener noreferrer">feat/monorepo</a>ï¼Œåç»­ä¼šè¿›è¡ŒæŒç»­çš„è¿­ä»£ï¼Œæœ‰éœ€è¦çš„åŒå­¦è‡ªå–ã€‚</p>
<p>æœ¬ç« ä¸»è¦ä»‹ç»äº†å°†ä¸€ä¸ªå®Œæˆçš„å·¥ç¨‹æ‹†åˆ†ä¸ºå¤šä¸ªé¡¹ç›®çš„è¿‡ç¨‹ï¼Œå€ŸåŠ© <code>NestJs CLI</code> æä¾›çš„ <code>monorepo</code> ä¸ <code>library</code> çš„åŠŸèƒ½ï¼Œæ€»ä½“æ‹†åˆ†çš„è¿‡ç¨‹è¿˜æ˜¯éå¸¸çš„é¡ºåˆ©ï¼ŒåŸºæœ¬ä¸Šåªéœ€è¦ä¿®æ”¹ç®€å•çš„å¼•ç”¨è·¯å¾„ä¸ <code>tsconfig</code> çš„åˆ«åå³å¯ã€‚</p>
<p>åœ¨é¡¹ç›®æ‹†åˆ†ä¹‹åï¼Œé™¤å»å…¬å…±æ¨¡å—çš„å¼•ç”¨ä¹‹å¤–ï¼Œæ¯ä¸ªç³»ç»Ÿçš„åŠŸèƒ½éƒ½ä¿æŒäº†æœ€å•ä¸€çš„æ¨¡å—ï¼Œä½†ç³»ç»Ÿä¹‹é—´æœ‰äº›æœåŠ¡è¿˜æ˜¯éœ€è¦ç›¸äº’å…³è”ï¼šæ¯”å¦‚ç”¨æˆ·ç³»ç»Ÿéœ€è¦æä¾›ç»™ç‰©æ–™ã€ç½‘å…³ç³»ç»Ÿç™»å½•ã€é‰´æƒçš„åŠŸèƒ½ã€ç‰©æ–™ç³»ç»Ÿéœ€è¦æä¾›ç»™ç½‘å…³èµ„æºæ¶ˆè´¹çš„æ•°æ®ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨åˆ°å¾®æœåŠ¡æ¥å°†æˆ‘ä»¬å„ä¸ªç³»ç»Ÿä¹‹é—´çš„åŠŸèƒ½è¿›è¡Œæ‰“é€šã€‚</p>
<p>æ‰€ä»¥åœ¨ä¸‹ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬å°†ä¸€èµ·å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¾®æœåŠ¡å°†å„ä¸ªç³»ç»Ÿä¹‹é—´çš„æœåŠ¡å…³è”èµ·æ¥ã€‚</p>
<p>å¦‚æœä½ æœ‰ä»€ä¹ˆç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºæˆ–è€…åŠ ç¾¤æ²Ÿé€šã€‚ ğŸ‘</p></div>
    </body>
    </html>